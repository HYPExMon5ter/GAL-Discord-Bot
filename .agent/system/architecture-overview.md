# Guardian Angel League Bot - Architecture Overview

**Last Updated:** 2025-10-10  
**Status:** Production Ready with Live Graphics temporarily deprecated

## ğŸ—ï¸ System Architecture

### Core Components
- **Discord Bot (`bot.py`)**: Modern discord.py v2 implementation with slash commands
- **Command System (`core/commands/`)**: Tournament management, registration, check-in
- **Configuration (`config.py`, `config.yaml`)**: YAML-based with environment validation
- **Persistence Layer**: PostgreSQL with SQLite fallback, connection pooling
- **Integration Framework**: Modular system for external services

### Current Integrations
- âœ… **Google Sheets**: Registration data, smart caching (10min refresh)
- âœ… **Riot API**: Player verification and statistics
- âœ… **IGN Verification**: IGN validation system
- âŒ **Live Graphics Dashboard**: **Dashboard temporarily deprecated â€” to be reintroduced post-DB migration.**

### Data Flow
```
Discord Commands â†’ Core Logic â†’ External APIs â†’ Database â†’ Discord UI
     â†“                â†“              â†“           â†“         â†“
Slash Commands â†’ Business Logic â†’ Sheets/Riot â†’ Cache â†’ Embeds/Views
```

## ğŸ“Š Current Health Status

### âœ… Working Systems
- Tournament registration and check-in
- Team management (normal/double-up modes)
- Onboarding system with approval workflow
- Waitlist management
- Role synchronization
- Background caching tasks
- Error handling and logging

### âš ï¸ Issues Identified
- **Live Graphics Dashboard**: Dashboard temporarily deprecated â€” to be reintroduced post-DB migration.
- **Security**: Discord tokens visible in logs (needs masking)
- **Dependencies**: Heavy ML packages not utilized (chromadb, langchain)

### ğŸš¨ Security Concerns
- Discord tokens exposed in log files
- Missing input validation on some endpoints
- No rate limiting on external API calls

## ğŸ“ˆ Performance Metrics
- **Dependencies**: 200+ packages (needs cleanup)
- **Log Size**: 20MB (healthy activity)
- **Cache Hit Rate**: High (effective Google Sheets caching)
- **Memory Usage**: Moderate (asyncio-based architecture)

## ğŸ”§ Optimization Recommendations

### High Priority
1. **Security**: Implement token masking in logs
2. **Dependencies**: Remove unused ML/AI packages
3. **Documentation**: Complete module documentation gaps

### Medium Priority
1. **Testing**: Expand beyond basic component tests
2. **Monitoring**: Add health check endpoints
3. **Documentation**: Update for current architecture
4. **API Rate Limiting**: Implement proper throttling

## ğŸ¯ Next Steps
1. Address immediate security concerns
2. Complete documentation coverage for all modules
3. Clean up dependency bloat
4. Improve test coverage
5. Consider migration to managed database

## ğŸ“ Recent Changes (2025-10-10)
- **ARCHITECTURE**: Moved to bot-only operation (dashboard removed)
- **ADDED**: IGN verification integration and sheet optimization modules
- **FIXED**: Syntax errors and encoding issues in core modules
- **UPDATED**: Factory AI agents and documentation system integration

---
**Generated by:** Full-Cycle System Analysis  
**Review Date:** 2025-10-10
