# Railway configuration for GAL Discord Bot with Dashboard

[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
# Health check configuration
healthcheckPath = "/health"
healthcheckTimeout = 180
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 20

# Resource allocation
numReplicas = 1

# Start command is handled by Dockerfile CMD to ensure API starts before health check

# Environment variables
[deploy.env]
NODE_ENV = "production"
ENABLE_DASHBOARD = "true"
PYTHONUNBUFFERED = "1"
PYTHONDONTWRITEBYTECODE = "1"
# Note: Discord bot not running in this deployment - only API server

# Service configuration for Railway
[service]
name = "gal-discord-bot"
# Auto-assigns public URL
port = 8000

# Multi-port configuration (Railway supports primary port only)
# Note: Dashboard frontend runs on port 3000/8080 but not accessible from outside

# Health check port (API backend)
[service.healthcheck]
path = "/health"
port = 8000
