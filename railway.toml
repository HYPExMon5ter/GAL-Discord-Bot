# Railway configuration for GAL Discord Bot with Dashboard

[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
# Health check configuration - DISABLED for immediate production deploy
# healthcheckPath = "/health"
# healthcheckTimeout = 180
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 20

# Resource allocation
numReplicas = 1

# Start command - remove to use Dockerfile CMD instead
# Start command - remove to use Dockerfile CMD instead

# Environment variables
[deploy.env]
NODE_ENV = "production"
ENABLE_DASHBOARD = "true"
PYTHONUNBUFFERED = "1"
PYTHONDONTWRITEBYTECODE = "1"
API_BASE_URL = "https://gal-discord-bot-production.up.railway.app"
NEXT_PUBLIC_API_URL = "https://gal-discord-bot-production.up.railway.app"
NEXT_PUBLIC_APP_TITLE = "Guardian Angel League Dashboard"
# Note: Discord bot not running in this deployment - only API server

# Service configuration for Railway
[service]
name = "gal-discord-bot"
# Auto-assigns public URL
port = 8000

# Multi-port configuration (Railway supports primary port only)
# Note: Dashboard frontend runs on port 3000/8080 but not accessible from outside

# Health check port (API backend)
[service.healthcheck]
path = "/health"
port = 8000
