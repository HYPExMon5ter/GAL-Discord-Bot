# Railway configuration for GAL Discord Bot with Dashboard

[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
# Health check configuration
healthcheckPath = "/health"
healthcheckTimeout = 90
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Resource allocation
numReplicas = 1

# Start command is handled by Dockerfile CMD to ensure API starts before health check

# Environment variables
[deploy.env]
NODE_ENV = "production"
ENABLE_DASHBOARD = "true"
PYTHONUNBUFFERED = "1"
PYTHONDONTWRITEBYTECODE = "1"

# Service configuration for Railway
[service]
name = "gal-discord-bot"
# Auto-assigns public URL

# Health check port (API backend)
[service.healthcheck]
path = "/health"
port = 8000
